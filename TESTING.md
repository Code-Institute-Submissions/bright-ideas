![Bright Ideas](../wireframes/site-image)

# Share A Plate

View the live site [HERE](https://bright-ideas-bm.herokuapp.com/)

View the GitHub repository [Here](https://github.com/brimurphy/bright-ideas)

View README.md [HERE](https://github.com/brimurphy/bright-ideas/blob/master/README.md)

## Table of Contents

- [Automated Testing](#automated-testing)

- [Manual Testing](#manual-testing)

- [Bugs](#bugs)

## Automated Testing
 
### Validation Services

  - [HTML](https://validator.w3.org/)

    * checkout.html - Label *for* attribute not matching input *id* --rectified
    * pretty_file_input.html - p tag should not be in a strong tag --ignored as this is required to style hidden text
    * index.html - no opening *p* tag in scope but closing *p* tag --tags were there but removed to just be a h4 element as this was causing styling issues
    * Warning on script type not being required, I have chosen to leave them in
    * All other errors have been generated by django template language
    

  - [CSS](https://jigsaw.w3.org/css-validator/)

    * No errors found

  - [JQuery](https://jshint.com/)

    * Missing semi-colons found in all JQuery code. Rectified
  

  - [Python](http://pep8online.com/)

    * No errors found 

### Manual Testing for User Stories

- Navigation Bar

  * The navigation bar is positioned at the top of the screen and stays visible on the top of the screen when the site is being scrolled.
  * All links bring the user to the relevant pages.
  * Search bar is fully functional on all pages and returns items with matching searches in their name and description.
  * Cart brings customer to their cart.
  * The MyProfile link produces a dropdown. If not logged in it returns *Register* and *Login* options.
  * If User is logged in it returns *My Profile*, *Tradespeople* and *Log Out* options.
  * If User is logged in AND is_superuser a further option of *Project Management* is returned.
  * On mobile and tablet views, the navbar collapses and a hamburger menu button is displayed instead and the search bar falls below the menu symbol.
  * On click the hamburger menu reveals main menu items, clicking on the menu links will either bring you to the relevant page or a dropdown menu will appear with further options.
  * If site logo is clicked it will return the user to the home page.

-  Search bar
  
  * When the input is focused on, the form has a gold, sharp box-shadow to indicate that the user is in the search field.
  * When an empty form is submitted, an error message is displayed to let the user know that a value is needed.
  * If no results are found that match the search, a message is displayed on the screen to let the user know.

- Home Page

  * Home page is responsive on all screen sizes.
  * Text carousel images are reduced on smaller screens for better UI.
  * About section image is removed on smaller screens for better UI.
  * Reviews reduce to 2 reviews on mobile and are stacked rather than inline.
  * Promise section are stacked on top of each other on mobile.

- Footer 
  
  * Footer is visible on all pages.
  * Footer is always positioned at the bottom of the site, even when there isn't a full page of content, the footer stays at the bottom of the page.
  * When social links are clicked in the footer, a new tab opens and the relevant social page is displayed.
  * When location is clicked in the footer, a new tab opens to Google Maps.
  * When email is clicked in the footer, a new tab opens with users email with email of site pre loaded.

-  Registration

  * When a user clicks on the 'Register' button from the main navbar or 'Sign Up' button in various alluth pages, the user is directed to the 'Sign Up' page.
  * In the form, all fields are required, allauth displays a validation message if incorrectly filled in or fields left empty.
  * Error will be displayed if emails don't match or passwords don't match.
  * When 'Sign Up' is clicked with a valid form, a message is displayed to let the user know that they have to validate their e-mail address.
  * User receives an e-mail from Bright Ideas with a link that brings the user to the 'Confirm E-mail Address'.
  * When confirm is clicked, the user is re-directed to the 'Sign In' page.
  * On succesfull sign in user is re-directed to the home page.

- Signing In/Out

  * Sign in allows users to sign in using their details once confirmation email is confirmed.
  * If incorrect values entered or field left empty error messages will be displayed.
  * When the 'Forgot Password' link is clicked, the user is navigated to a page to enter their e-mail address. They will then receive an e-mail with a link to reset the password.
  * When a user clicks 'Logout' from the MyProfile menu they are redirected to the sign out page. Clicking siign out logs user out, returns view to home page and displays a message that you have succesfully logged out.

- Product Links

  * When All Products link is pressed user is brought to a page displaying all products on the site.
  * There are 4 category buttons on the top of the page that when clicked display more related options to the selected option.
  * When a sub-category button is clicked, items are filtered to the selected category.
  * There is a sort button above the products, when this is clicked, it expands to reveal sorting buttons that sort selected items by added price, rating, or alphabetically.
  * If the sort button is set to it's default setting of 'sort by' items will be sorted by product id.
  * All products are in a grid and have a responsive design, resizing to have 3 products per row on extra-large screens, 2 on medium, and 1 on small.
  * Each product have their Image, name, rating, price visible and if the item is in a clearance sale a sale badge is displayed on image.
  * When Item's image is clicked, the user is navigated to the individual item's page.
  

- Item Detail Page

  * Item Detail Page displays product image, title, description, additional information, quantity selector, price, 'add to cart' button, and 'keep shopping' button.
  * When the user clicks +/- buttons for quantity, the quantity increases or decreases, and when added to bag selected quantity is added.
  * the - button and + button are disabled (function and style) if the user has enters a value outside the allowed values.
  * If user manually enters invalid number, error message will be displayed when they try add items to the cart.
  * When the user has selected a valid quantity and the 'Add to cart' button is clicked, an item(s) is added to the cart and a cart notification is displayed with all other items in the cart and the page is reloaded.
  * The description and additional information buttons will only allow one or the other or neither to be displayed, both will not be displayed at the same time.
  * If user is logged in and has admin rights an update and delete button are visible.
  * If admin selects update they are redirected to an update form where they can update the selected items details.
  * If details are valid and admins clicks on update product is succesfully updated with a success message displayed.
  * If admin clicks cancel instead of update, update will be cancelled and admin returned to all products page.

- Shopping Cart

  * When the user clicks 'Add to the cart' from the item detail view, the item is added to the cart and cart toast is displayed with preview of cart.
  * In cart toast, the user sees item image, price, quantity, and total.
  * When 'Secure Checkout' is clicked user is brought to the shopping cart screen to review order.
  * The cart toast i closed by pressing the 'X' button in upper right corner.
  * User can navigate to the shopping cart page using the cart icon in the navbar.
  * On the shopping cart page, the user sees a summary of their order. Items, their price, image, quantity, subtotal and a thrash can for deleting a line displayed. 
  * Under the cart summary the user can see cart total, delivery charges if any and a grand total of their order. There is a 'keep shopping' button to bring the user back to the all products page and a 'checkout' button which brings the user to the checkout screen.
  * When the thrash can is clicked item is deleted from order.

- Checkout

  * On the checkout page, the user sees Personal, Delivery, and Payment Info forms and an order summary.
  * If any field on form is incorrect an error will be displayed prompting user how to resolve issue.
  * When a valid form has been filled out, and the user clicks on 'Complete Order' they see a loading spinner covering page and then are re-directed to the Checkout Success page where they can see their order details and delivery details added.
  * A success message is displayed notifing user that a confirmation email has been sent to their registered email.
  * On the checkout success page, if 'forget something' button is pressed user is returned to all products page.

- Profile Page

  * The My Profile page displays the users Personal information which is used for quicker checkout and a summary of past orders.
  * A user can edit their personal details by changing required field and clicking update button.
  * When update button is clicked, success message is displayed letting user know information was updated and page is reloaded with new details present.
  * If user hovers over order number full number is displayed.
  * When user clicks on order number they a redirected to an order summary page. With all relevant details of order and 'back to profile' button.
  * An alert message is displayed telling customer it's apast order and an email had been sent on the order date.

- Admin 
  
  * If user has admin rights they can click project management from the My Profile dropdown to go to the add product page.
  * User can enter all details of new product but must provide a category, name, description and price.
  * If fields are valid and user clicks 'add product' button, item is added to site and success message is displayed.
  * If fields are incorrectly filed in an error message will be displayed when 'add product' button is clicked.
  * Clicking 'cancel button will return user to all products page.
  * If admin user navigates to the item detail page they will be able to delete a product or update a product.
  * If user selects delete they are redirected to a page asking them are they sure.
  * If user selects cancel user is returned to item detail page.
  * If user selects delete item is deleted from store, success message displayed and user redirected to all products page.
  * If user selects update from item detail page they are redirected to a form to update products details.
  * If user selects cancel no updates will be saved.
  * If user edits details and clicks 'update product' button product is updated, success message displayed and user returned to item detail page with updated values present. 


### Bugs

  * Emails not being sent after successful purchase:
    After adding print statements to checkout sequence, re-watching boutique ado stripe and wh videos, I found that pid had been changed to client_secret on stripe and the incorrect template name was being called in the wh handler.

    **fixed**

  * Error: Save() prohibited to prevent data loss due to unsaved related object:
    Error when creating and adjusting cart, totals in views and admin not updating values. Order save function missing from Order model
    Help from tutor supports Cormac Lawlor

    **fixed**

  * All deals query search:
    I couldn't get the All Deals search to render the correct items, with some help from [Django ORM Cookbook](https://books.agiliq.com/projects/django-orm-cookbook/en/latest/or_query.html) and (Wellfire article)[https://wellfire.co/learn/simple-search-manager-methods/] and  (Django Docs)[https://docs.djangoproject.com/en/3.1/topics/db/search/] I got this sorted.

    **fixed**

  * Footer to stay at bottom:
    Footer wouldn't stay to at least to the bottom of the view port, I found a few solutions like (Free Code Camps)[https://www.freecodecamp.org/news/how-to-keep-your-footer-where-it-belongs-59c6aa05c59c/] but this caused an issue on the product add template with the footer covering the bottom of the form.
    Finally got issued sorted with [Stack Overflow](https://stackoverflow.com/questions/643879/css-to-make-html-page-footer-stay-at-bottom-of-the-page-with-a-minimum-height-b) and vsync answer.

    **fixed**

  * Test Webhooks failing to send:
    Test some test webhooks are returning 500 errors. The payments are working and webhooks recieved in Stripe. 

    **unresolved**

    * Quantity Input controls not validating on cart:
      Values for the quantity selector in the cart template allowing values outside the range, if minus value entered item just deletes from cart but add a high enough number and an error would be returned.
      I've removed this feature for now for time constraints, with a view to fixing the bug at a later date

      **removed**

    * Product count not working on success toast or cart template:
      Value stays at (0) no matter how many items are in the cart.
      I've removed this feature for now for time constraints, with a view to fixing the bug at a later date

      **removed**
